<div class="modal-content">
    <div class="modal-header">
        <h1 >Alta Proveedor</h1>
        <button type="button" class="btn-close btn " id="cerrar" (click)="activeModal.close()"></button>
    </div>
    <div class="modal-body">
        <div class="row">        
            <div class="d-flex my-2">
                <div class="w-50">
                    <h2>Datos del Proveedor:</h2>
                </div>
                <div class="w-50">
                    <h2 class="ms-2">Dirección:</h2>
                </div>
            </div>
            <div>
                <form [formGroup]="form" (ngSubmit)="onSubmit()">
                    <div class="row">                        
                        <div class="col">                          
                            <div class="form-group mb-2">
                                <label for="RazonSocial">Razón Social</label>
                                <div class="input-group">
                                <input formControlName="razonSocial" class="form-control edicion" required type="text" [ngClass]="{ 'is-invalid': form.get('razonSocial').invalid && (form.get('razonSocial').dirty || form.get('razonSocial').touched) }" [ngClass]="{'isDisabled': soloVista}">                        
                                </div>
                                <div *ngIf="hasError('razonSocial','required')">La razón social es obligatoria.</div>
                                <div *ngIf="hasError('razonSocial', 'maxlength')">La razón social no debe exceder 30 caracteres.</div>
                            </div>    
                            <div class="form-group mb-2">
                                <label for="Cuit">CUIT</label>
                                <div class="input-group">
                                    <input 
                                    formControlName="cuit" 
                                    class="form-control edicion" 
                                    required 
                                    type="text" 
                                    appCuitFormat
                                    [placeholder]="'ej: 20-12345678-9'"
                                    [ngClass]="{
                                    'is-invalid': form.get('cuit').invalid && (form.get('cuit').dirty || form.get('cuit').touched),
                                    'isDisabled': soloVista
                                    }">
                                </div>
                                <div *ngIf="hasError('cuit','required')">El CUIT es obligatorio.</div>
                                <div *ngIf="hasError('cuit','cuitInvalido')">El CUIT debe tener el formato xx-xxxxxxxx-x.</div>
                            </div>      
                            <div class="form-group mb-2">
                                <label for="Proveedor">Condición Fiscal</label>
                                <select class="form-select form-select-md" (change)="changeCondFiscal($event)" required [ngClass]="{'isDisabled': soloVista}">                            
                                    <option [value]="condFiscal"> {{condFiscal === "" ? "Elegir Cond. Fiscal" : condFiscal }}</option>
                                    <option value="Responsable Inscripto - Factura A">Responsable Inscripto - Factura A</option>
                                    <option value="Monotributista - Factura C">Monotributista - Factura C</option>
                                    <!-- <option value="Autónomo - Factura A">Autónomo - Factura A</option>
                                    <option value="Autónomo - Factura B">Autónomo - Factura B</option> -->                            
                                </select>
                            </div>                         
                            <div class="form-group mb-2" [ngClass]="{'isDisabled': soloVista}">
                                <h3 class="">Tipo de Tarifa</h3>
                                <form [formGroup]="formTipoTarifa" (ngSubmit)="onSubmit()" class="d-flex mt-2 justify-content-start">
                                    <div class="form-check form-switch form-check-reverse w-25 ">
                                        <input formControlName="general" class="form-check-input" type="checkbox" 
                                                (change)="onTarifaTipoChange('general')" id="tarifaGeneral" checked >
                                        <label class="form-check-label" for="tarifaGeneral">General</label>
                                    </div>
                                    <div class="form-check form-switch form-check-reverse w-25">
                                        <input formControlName="especial" class="form-check-input" type="checkbox" 
                                                (change)="onTarifaTipoChange('especial')" id="tarifaEspecial">
                                        <label class="form-check-label" for="tarifaEspecial">Especial</label>
                                    </div>
                                    <div class="form-check form-switch form-check-reverse w-25">
                                        <input formControlName="eventual" class="form-check-input" type="checkbox" 
                                                (change)="onTarifaTipoChange('eventual')" id="tarifaEventual" >
                                        <label class="form-check-label" for="tarifaEventual">Eventual</label>
                                    </div>                            
                                </form>
                            </div>                             
                        </div>
                        <div class="col" [ngClass]="{'isDisabled': soloVista}">                                                                  
                            <div class="form-group mb-2">
                                <label>Provincia</label>
                                <select id="selectProvincias"     class="form-select form-select-md" (change)="selectProvincia($event)">
                                    <option [value]="$provinciaSeleccionada"> {{$provinciaSeleccionada === "" ? "Elige una provincia" : $provinciaSeleccionada }}</option>
                                    <option *ngFor="let prov of $provincias" [value]="prov.nombre">{{prov.nombre}}</option>
                                </select>
                                <span></span>
                            </div>                    
                            <div class="form-group mb-2">
                                <label>Municipio</label>
                                <select id="selectMunicipios" class="form-select form-select-md"  (change)="selectMunicipio($event)">
                                    <option [value]="$municipioSeleccionado"> {{$municipioSeleccionado === "" ? "Elige un municipio" : $municipioSeleccionado }}</option>
                                    <option *ngFor="let mun of $municipios" [value]="mun.nombre">{{mun.nombre}}</option>
                                </select>
                                <span></span>
                            </div>
                            <div class="form-group mb-2">
                                <label>Localidad</label>
                                <select id="selectLocalidades" class="form-select form-select-md" (change)="selectLocalidad($event)">
                                    <option [value]="$localidadSeleccionada"> {{$localidadSeleccionada === "" ? "Elige una localidad" : $localidadSeleccionada }}</option>
                                    <option *ngFor="let loc of $localidades" [value]="loc.nombre">{{loc.nombre}}</option>
                                </select>
                            </div>
                            <div class="form-group mb-2">
                                <label for="Direccion">Domicilio</label>
                                <div class="input-group">
                                    <input formControlName="direccion" class="form-control" required type="text" [ngClass]="{ 'is-invalid': form.get('direccion').invalid && (form.get('direccion').dirty || form.get('direccion').touched) }" [ngClass]="{'isDisabled': soloVista}">                            
                                </div>
                                <div *ngIf="hasError('direccion', 'required')">El domicilio es obligatorio.</div>
                                <div *ngIf="hasError('direccion', 'maxlength')">El domicilio no debe exceder 100 caracteres.</div>
                            </div>
                        </div>                    
                    </div>                
                </form>
                <hr>
                <div class="form-group mt-2">   
                    <div class="d-flex justify-content-between mt-3">
                    <h3>Contactos: </h3>                                                      
                    <button type="button" class="btn" (click)="abrirModalContactos()" *ngIf="!soloVista">Agregar contactos          
                        <svg *ngIf="!mostrarFormulario" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                        </svg>
                        <svg *ngIf="mostrarFormulario"  xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dash-circle" viewBox="0 0 16 16">
                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                            <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/>
                        </svg>          
                    </button>                         
                    </div>
                    <h4 *ngIf="contactos.length === 0 ">Sin contactos agendados</h4>
                    <div *ngIf="contactos.length > 0 ">
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                <th class="tabla align-baseline" scope="col">Puesto</th>                    
                                <th class="tabla align-baseline" scope="col">Apellido</th>
                                <th class="tabla align-baseline" scope="col">Nombre</th>
                                <th class="tabla align-baseline" scope="col">Telefono</th> 
                                <th class="tabla align-baseline" scope="col">Email</th>
                                <th *ngIf="!soloVista"></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let contacto of contactos, let i = index" [ngClass]="{'isDisabled': soloVista}">
                                    <th class="tabla align-baseline" scope="col">{{contacto.puesto}}</th>                    
                                    <th class="tabla align-baseline" scope="col">{{contacto.apellido}}</th>
                                    <th class="tabla align-baseline" scope="col">{{contacto.nombre}}</th>
                                    <th class="tabla align-baseline" scope="col">{{contacto.telefono}}</th>
                                    <th class="tabla align-baseline" scope="col">{{contacto.email}}</th>
                                    <th class="tabla align-baseline" scope="col" *ngIf="!soloVista">                                  
                                        <app-btn-eliminar name="Eliminar" (click)="eliminarContacto(i)"></app-btn-eliminar>
                                    </th>
                                </tr> 
                            </tbody>                    
                        </table>          
                    </div>
                </div>  
            </div>           
        </div>
    </div>
    <div class="modal-footer" *ngIf="!soloVista" [ngClass]="{'isDisabled': form.invalid}">
        <app-btn-agregar name="Guardar"  type="button" (click)="onSubmit()"></app-btn-agregar>
    </div>        
</div>  




