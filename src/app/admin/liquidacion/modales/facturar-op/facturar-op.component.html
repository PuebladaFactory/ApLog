

<div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-2" id="exampleModalToggleLabel2">Liquidaci√≥n de Servicios</h1>
                  
        <button type="button" class="btn-close btn " id="cerrar" (click)="closeModal()"></button>
      </div>        
      <div class="modal-body">
        <div class="d-flex justify-content-between">
            <div>
                <h3>{{titulo}}</h3>       
            </div>
            <div class="d-flex">
                <h4 class="me-3">Descuentos</h4>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16" type="button" (click)="abrirModalDescuentos()" style="color: rgb(0, 110, 255);">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                </svg>                   
            </div>          
          </div>            
          
          <div class="table-responsive">
              <table class="table table-bordered table-striped">
                <thead>
                  <tr>
                    <th *ngFor="let col of columnasVisibles" class="text-center">
                      <div class="d-flex">
                          <span class="w-100 text-center">{{ col.nombre }}</span>
                          <input
                            type="checkbox"
                            [(ngModel)]="col.seleccionada"
                            class="flex-shrink-1"
                            (change)="actualizarColumnasSeleccionadas()"
                          />
                      </div>                    
                      
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let operacion of facLiquidadas">
                    <td *ngFor="let col of columnasVisibles" class="text-center">
                      <span *ngIf="col.nombre === 'Quincena'; else defaultContent" [innerHTML]="obtenerDatoColumna(operacion, col)"></span>
                      <ng-template #defaultContent>
                        {{ obtenerDatoColumna(operacion, col) }}
                      </ng-template>
                    </td>
                  </tr>                
                  <ng-container class="table-group-divider table-bordered table-striped" *ngIf="tieneDescuentos">                  
                      <ng-container *ngIf="fromParent.origen !== 'proveedores' else proveedoresDesc">
                          <tr><th colspan="11">Descuentos:</th></tr>
                          <tr *ngFor="let desc of descuentosAplicados">
                              <td colspan="10">{{desc.concepto}}</td>
                              <td class="text-center">- {{desc.valor | formatearValor :"$"}}</td>
                          </tr>
                      </ng-container>
                      <ng-template #proveedoresDesc>
                          <tr><th colspan="12">Descuentos:</th></tr>
                          <tr *ngFor="let desc of descuentosAplicados">
                              <td colspan="11">{{desc.concepto}}</td>
                              <td class="text-center">- {{desc.valor  | formatearValor :"$"}}</td>
                          </tr>
                      </ng-template>
                      
                  </ng-container>
                </tbody>
                
                <tfoot class="table-group-divider">                  
                    <tr>
                        <th *ngIf="fromParent.origen !== 'proveedores'" colspan="10"><span class="ms-3">Total</span></th>
                        <th *ngIf="fromParent.origen === 'proveedores'" colspan="11"><span class="ms-3">Total</span></th>
                        <th class="text-center">{{tieneDescuentos ? formatearValor(total - totalDescuento) : formatearValor(total)}}</th>
                    </tr>
                </tfoot>
              </table>            
          </div>
      </div>
      <div class="modal-footer">
          <h4>Generar Factura:</h4>
          <app-btn-leer name="excel" (click)="onSubmit('excel')"></app-btn-leer>
          <app-btn-leer name="pdf" (click)="onSubmit('pdf')"></app-btn-leer>
      </div>
    </div>
  </div>
  
  
